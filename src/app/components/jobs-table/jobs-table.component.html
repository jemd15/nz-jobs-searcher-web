@if (jobs.length) {
	<mat-toolbar>
		<span class="title">{{ jobs.length }} results for '{{ search }}'</span>
	</mat-toolbar>
	<mat-card appearance="outlined">
		<mat-card-content>
			<table mat-table [dataSource]="dataSource" matSort matSortActive="title" matSortDisableClear matSortDirection="asc">
				<!-- Progress Column -->
				<ng-container matColumnDef="title">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Title </th>
					<td mat-cell *matCellDef="let row">
						{{ row.title }} <br />
						{{ row.company }}
					</td>
				</ng-container>

				<!-- Location Column -->
				<ng-container matColumnDef="location">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Location </th>
					<td mat-cell *matCellDef="let row"> {{ row.location.split(',')[0] }} </td>
				</ng-container>

				<!-- Location Travel Time -->
				<ng-container matColumnDef="travelTime">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Travel Time </th>
					<td
						mat-cell
						*matCellDef="let row"
						[ngClass]="{
							greenAccent: row.accent === 'green',
							orangeAccent: row.accent === 'orange',
							redAccent: row.accent === 'red'
						}">
						{{ row.travelTime.split(',')[0] }}
					</td>
				</ng-container>

				<!-- Listing Date Column -->
				<ng-container matColumnDef="listingDate">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Listing Date</th>
					<td mat-cell *matCellDef="let row">
						@if (row.listingDate && !row.listingDate.includes('featured')) {
							{{ row.listingDate | date }}
						} @else {
							{{ row.listingDate }}
						}
					</td>
				</ng-container>

				<!-- Salary Column -->
				<ng-container matColumnDef="salary">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Salary </th>
					<td mat-cell *matCellDef="let row"> {{ row.salary }} </td>
				</ng-container>

				<!-- Status Column -->
				<ng-container matColumnDef="status">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
					<td mat-cell *matCellDef="let row">
						@if (row.status === 'new') {
							<button mat-flat-button color="accent">{{ row.status }}</button>
						}
						@if (row.status === 'visited') {
							<button mat-flat-button disabled>{{ row.status }}</button>
						}
						@if (row.status === 'applied') {
							<button mat-flat-button color="primary">{{ row.status }}</button>
						}
					</td>
				</ng-container>

				<!-- Site Column -->
				<ng-container matColumnDef="site">
					<th mat-header-cell *matHeaderCellDef mat-sort-header> Site </th>
					<td mat-cell *matCellDef="let row">
						<a mat-stroked-button [href]="row.url" target="_blank">{{ row.site }}</a>
					</td>
				</ng-container>

				<!-- Url Column -->
				<ng-container matColumnDef="...">
					<th mat-header-cell *matHeaderCellDef mat-sort-header>
						<button mat-icon-button>
							<mat-icon>more_horiz</mat-icon>
						</button>
					</th>
					<td mat-cell *matCellDef="let row">
						<button mat-icon-button>
							<mat-icon>more_horiz</mat-icon>
						</button>
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
			</table>

			<!-- <mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page" (page)="handlePageEvent($event)"></mat-paginator> -->
		</mat-card-content>
	</mat-card>
} @else {
	<div class="row center-md">
		<div class="col-md-8">
			<object mat-card-image type="image/svg+xml" data="../../../assets/ban animation.svg"></object>
		</div>
	</div>
}
